<%- include('../partials/header.ejs') %>
<%- include('../partials/navbar.ejs') %>
<form action="/behavior/summary" method="POST">
<div class="row justify-content-center">
  <!-- Week -->
  <div class="col-6 py-3">
    <div class="card border-0 shadow mt-5">
      <div class="card-body">
        <h1 style="font-weight: 300;">Week Summary</h1>
        <p class="lead">Your summary of last week is shown by default. You can select a week.</p>
        <div class="d-flex">
          <div class="form-group mr-sm-3 mb-2">
            <label for="week" class="sr-only">Week</label>
            <input type="week" id="week" name="week" class="form-control" value="<%= week %>" required>
          </div>
          <button type="submit" class="btn btn-info mb-2">Search</button>
        </div>
        <hr class="my-4">
        <div id="week_summary_contents">
        <% if (week_summary) { %>
          <p class="text-monospace">Average sleep duration: <%= Number(week_summary.avg_sleep_duration).toFixed(2) %></p>
          <p class="text-monospace">Average time on sports or exercises: <%= Number(week_summary.avg_time_on_sports).toFixed(2) %></p>
          <p class="text-monospace">Average time on study: <%= Number(week_summary.avg_time_on_study).toFixed(2) %></p>
          <p class="text-monospace">Average sleep quality: <%= Number(week_summary.avg_sleep_quality).toFixed(2) %></p>
          <p class="text-monospace">Average generic mood: <%= Number(week_summary.avg_mood).toFixed(2) %></p>
        <% } else { %>
          <p class="text-monospace">No data for the given week</p>
        <% } %>
        </div>
      </div>
    </div>
  </div>

  <!-- Month -->
  <div class="col-6 py-3">
    <div class="card border-0 shadow mt-5">
      <div class="card-body">
        <h1 style="font-weight: 300;">Month Summary</h1>
        <p class="lead">Your summary of last month is shown by default. You can select a month.</p>
        <div class="d-flex">
          <div class="form-group mr-sm-3 mb-2">
            <label for="month" class="sr-only">Month</label>
            <input type="month" id="month" name="month" class="form-control" value="<%= month %>" required>
          </div>
          <button type="submit" class="btn btn-info mb-2">Search</button>
        </div>
        <hr class="my-4">
        <% if (month_summary) { %>
          <p class="text-monospace">Average sleep duration: <%= Number(month_summary.avg_sleep_duration).toFixed(2) %></p>
          <p class="text-monospace">Average time on sports or exercises: <%= Number(month_summary.avg_time_on_sports).toFixed(2) %></p>
          <p class="text-monospace">Average time on study: <%= Number(month_summary.avg_time_on_study).toFixed(2) %></p>
          <p class="text-monospace">Average sleep quality: <%= Number(month_summary.avg_sleep_quality).toFixed(2) %></p>
          <p class="text-monospace">Average generic mood: <%= Number(month_summary.avg_mood).toFixed(2) %></p>
        <% } else { %>
          <p>No data for the given month</p>
        <% } %>
      </div>
    </div>
  </div>
</div>
</form>
<%- include('../partials/footer.ejs') %>